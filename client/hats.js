var z1=Object.defineProperty;var M1=(q,Q)=>{for(var W in Q)z1(q,W,{get:Q[W],enumerable:!0,configurable:!0,set:(J)=>Q[W]=()=>J})};var xq={};M1(xq,{uncachePartHat:()=>gq,setPartHat:()=>zq,serverAddress:()=>i,removeHat:()=>rq,hatCache:()=>r,getPartHat:()=>Mq,getHatList:()=>Tq,getHatImage:()=>_1,getHatBaseURL:()=>d,getCurrentHat:()=>C,changeHat:()=>Fq,applyHat:()=>Dq});function p(q,Q){MPP.client.sendArray([{m:"custom",target:{mode:"id",id:q},data:Q}])}var i="https://hats.hri7566.info/api",hq="tophat",Iq=localStorage.getItem("hat"),Pq=localStorage.getItem("hatCache");if(typeof Iq!=="undefined"&&Iq!==null)hq=Iq;var r=new Map;if(typeof Pq!=="undefined"&&Pq!==null){let q=JSON.parse(Pq);for(let Q of Object.keys(q))r.set(Q,q[Q])}function C(){return hq}function d(q){return new URL(i+`/hat?id=${q}`)}async function _1(q){return new URL(i+`/hat?id=${q}`)}function rq(q){let Q=Object.values(MPP.client.ppl).find((W)=>W._id==q);if(!Q)return;$(Q.nameDiv).children(".mpp-hat").remove(),$(Q.cursorDiv).children(".name").children(".cursor-hat-conatiner").remove()}async function Dq(q,Q){if(typeof MPP.client.channel=="undefined")return;let W=Object.values(MPP.client.ppl).find((U)=>U._id==q);if(!W)return;$(W.nameDiv).prepend(`<div class="mpp-hat" data-hat-id="${Q}"></div>`);let J=$(W.cursorDiv).children(".name"),X="",G="",Y=$(W.cursorDiv).text();if($(J).children(".nametext").text().length!==0)X=$(J).children(".curtag").text(),G=$(J).children(".curtag").css("background-color"),Y=$(J).children(".nametext").text();if($(W.cursorDiv).children(".name").html(`<span class="nametext">${Y}</span><div class="cursor-hat-container"><div class="cursor-hat"></div></div>`),X.length!==0)$(W.cursorDiv).children(".name").prepend(`<span class="curtag" id="nametag-${W._id}" style="background-color: ${G};">${X}</span>`);$(W.cursorDiv).children(".name").css({display:"block","align-items":"center",position:"relative","white-space":"nowrap",height:"fit-content",width:"fit-content","line-height":"15px","text-align":"center","border-radius":"3px",left:"18px",top:"12px","pointer-events":"none",color:"#fff",padding:"unset","font-size":"unset"}),$(W.cursorDiv).children(".name").children("span.nametext").css({display:"inline-block","pointer-events":"none",color:"#fff","border-radius":"2px","margin-bottom":"1px","white-space":"nowrap","flex-shrink":"0","font-size":"10px"});let B=$(W.nameDiv).children(".mpp-hat"),w=$(W.cursorDiv).children(".name").children(".cursor-hat-container"),R=$(W.cursorDiv).children(".name").children(".cursor-hat-container").children(".cursor-hat");if(B.css({background:`url(${i}/hat?id=${encodeURIComponent(Q)})`,width:"16px",height:"16px",position:"absolute",top:"-8px",left:"4px"}),w.css({display:"inline-block",position:"relative",top:"-24px",right:"0",height:"0",width:"16px"}),R.css({content:`url(${i}/hat?id=${encodeURIComponent(Q)})`}),typeof MPP.client.channel.crown=="object"){if(MPP.client.channel.crown.hasOwnProperty("userId")){if(MPP.client.channel.crown.userId==q)B.css({top:"-8px",left:"20px"}),w.css({position:"absolute",top:"-6px",right:"17px"})}}}async function zq(q,Q){rq(q),await Dq(q,Q),r.set(q,Q);let W={};for(let[J,X]of r.entries())W[J]=X;localStorage.setItem("hatCache",JSON.stringify(W))}function Mq(q){let Q=r.get(q);if(typeof Q!=="undefined")return Q;p(q,{m:"hat_query"})}async function gq(q){r.delete(q)}async function Fq(q){hq=q,localStorage.setItem("hat",C()),zq(MPP.client.getOwnParticipant()._id,q),MPP.client.sendArray([{m:"custom",target:{mode:"subscribed"},data:{m:"hat_change",hat:C()}}]);try{$("#mpp-hats-button-icon").attr("src",d(C()).toString())}catch(Q){}}async function Tq(){return await(await fetch(i+"/list")).json()}class lq{_events={};on(q,Q){if(typeof this._events[q]=="undefined")this._events[q]=[];let W={once:!1,listener:Q};this._events[q].push(W)}off(q,Q){if(typeof this._events[q]=="undefined")return;for(let W in this._events[q]){if(typeof W!=="number")continue;if(!(W in this._events[q][W]))continue;if(this._events[q][W].listener!==Q)continue;this._events[q].splice(W,1)}}once(q,Q){if(typeof this._events[q]=="undefined")return;this._events[q].push({once:!0,listener:Q})}emit(q,Q){let W=q.evtn;if(!W)return;if(typeof this._events[W]=="undefined")return;for(let J in this._events[q.evtn]){if(isNaN(parseInt(J)))continue;if(typeof this._events[W][J]=="undefined")continue;let X=this._events[W][J];if(!X)continue;if(X.once)this._events[W].splice(parseInt(J),1);X.listener(q,Q)}}}var o=new lq;globalThis.e=o;o.on("query",(q,Q)=>{let W=Q.p;p(W,{m:"hat_query_reply",hat:C()})});o.on("query_reply",async(q,Q)=>{await zq(Q.p,q.hat)});o.on("change",async(q,Q)=>{await zq(Q.p,q.hat)});var L;(function(q){q.assertEqual=(X)=>X;function Q(X){}q.assertIs=Q;function W(X){throw new Error}q.assertNever=W,q.arrayToEnum=(X)=>{let G={};for(let Y of X)G[Y]=Y;return G},q.getValidEnumValues=(X)=>{let G=q.objectKeys(X).filter((B)=>typeof X[X[B]]!=="number"),Y={};for(let B of G)Y[B]=X[B];return q.objectValues(Y)},q.objectValues=(X)=>{return q.objectKeys(X).map(function(G){return X[G]})},q.objectKeys=typeof Object.keys==="function"?(X)=>Object.keys(X):(X)=>{let G=[];for(let Y in X)if(Object.prototype.hasOwnProperty.call(X,Y))G.push(Y);return G},q.find=(X,G)=>{for(let Y of X)if(G(Y))return Y;return},q.isInteger=typeof Number.isInteger==="function"?(X)=>Number.isInteger(X):(X)=>typeof X==="number"&&isFinite(X)&&Math.floor(X)===X;function J(X,G=" | "){return X.map((Y)=>typeof Y==="string"?`'${Y}'`:Y).join(G)}q.joinValues=J,q.jsonStringifyReplacer=(X,G)=>{if(typeof G==="bigint")return G.toString();return G}})(L||(L={}));var mq;(function(q){q.mergeShapes=(Q,W)=>{return{...Q,...W}}})(mq||(mq={}));var M=L.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),T=(q)=>{switch(typeof q){case"undefined":return M.undefined;case"string":return M.string;case"number":return isNaN(q)?M.nan:M.number;case"boolean":return M.boolean;case"function":return M.function;case"bigint":return M.bigint;case"symbol":return M.symbol;case"object":if(Array.isArray(q))return M.array;if(q===null)return M.null;if(q.then&&typeof q.then==="function"&&q.catch&&typeof q.catch==="function")return M.promise;if(typeof Map!=="undefined"&&q instanceof Map)return M.map;if(typeof Set!=="undefined"&&q instanceof Set)return M.set;if(typeof Date!=="undefined"&&q instanceof Date)return M.date;return M.object;default:return M.unknown}},H=L.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),E1=(q)=>{return JSON.stringify(q,null,2).replace(/"([^"]+)":/g,"$1:")};class F extends Error{constructor(q){super();this.issues=[],this.addIssue=(W)=>{this.issues=[...this.issues,W]},this.addIssues=(W=[])=>{this.issues=[...this.issues,...W]};let Q=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,Q);else this.__proto__=Q;this.name="ZodError",this.issues=q}get errors(){return this.issues}format(q){let Q=q||function(X){return X.message},W={_errors:[]},J=(X)=>{for(let G of X.issues)if(G.code==="invalid_union")G.unionErrors.map(J);else if(G.code==="invalid_return_type")J(G.returnTypeError);else if(G.code==="invalid_arguments")J(G.argumentsError);else if(G.path.length===0)W._errors.push(Q(G));else{let Y=W,B=0;while(B<G.path.length){let w=G.path[B];if(B!==G.path.length-1)Y[w]=Y[w]||{_errors:[]};else Y[w]=Y[w]||{_errors:[]},Y[w]._errors.push(Q(G));Y=Y[w],B++}}};return J(this),W}static assert(q){if(!(q instanceof F))throw new Error(`Not a ZodError: ${q}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,L.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(q=(Q)=>Q.message){let Q={},W=[];for(let J of this.issues)if(J.path.length>0)Q[J.path[0]]=Q[J.path[0]]||[],Q[J.path[0]].push(q(J));else W.push(q(J));return{formErrors:W,fieldErrors:Q}}get formErrors(){return this.flatten()}}F.create=(q)=>{return new F(q)};var e=(q,Q)=>{let W;switch(q.code){case H.invalid_type:if(q.received===M.undefined)W="Required";else W=`Expected ${q.expected}, received ${q.received}`;break;case H.invalid_literal:W=`Invalid literal value, expected ${JSON.stringify(q.expected,L.jsonStringifyReplacer)}`;break;case H.unrecognized_keys:W=`Unrecognized key(s) in object: ${L.joinValues(q.keys,", ")}`;break;case H.invalid_union:W="Invalid input";break;case H.invalid_union_discriminator:W=`Invalid discriminator value. Expected ${L.joinValues(q.options)}`;break;case H.invalid_enum_value:W=`Invalid enum value. Expected ${L.joinValues(q.options)}, received '${q.received}'`;break;case H.invalid_arguments:W="Invalid function arguments";break;case H.invalid_return_type:W="Invalid function return type";break;case H.invalid_date:W="Invalid date";break;case H.invalid_string:if(typeof q.validation==="object")if("includes"in q.validation){if(W=`Invalid input: must include "${q.validation.includes}"`,typeof q.validation.position==="number")W=`${W} at one or more positions greater than or equal to ${q.validation.position}`}else if("startsWith"in q.validation)W=`Invalid input: must start with "${q.validation.startsWith}"`;else if("endsWith"in q.validation)W=`Invalid input: must end with "${q.validation.endsWith}"`;else L.assertNever(q.validation);else if(q.validation!=="regex")W=`Invalid ${q.validation}`;else W="Invalid";break;case H.too_small:if(q.type==="array")W=`Array must contain ${q.exact?"exactly":q.inclusive?"at least":"more than"} ${q.minimum} element(s)`;else if(q.type==="string")W=`String must contain ${q.exact?"exactly":q.inclusive?"at least":"over"} ${q.minimum} character(s)`;else if(q.type==="number")W=`Number must be ${q.exact?"exactly equal to ":q.inclusive?"greater than or equal to ":"greater than "}${q.minimum}`;else if(q.type==="date")W=`Date must be ${q.exact?"exactly equal to ":q.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(q.minimum))}`;else W="Invalid input";break;case H.too_big:if(q.type==="array")W=`Array must contain ${q.exact?"exactly":q.inclusive?"at most":"less than"} ${q.maximum} element(s)`;else if(q.type==="string")W=`String must contain ${q.exact?"exactly":q.inclusive?"at most":"under"} ${q.maximum} character(s)`;else if(q.type==="number")W=`Number must be ${q.exact?"exactly":q.inclusive?"less than or equal to":"less than"} ${q.maximum}`;else if(q.type==="bigint")W=`BigInt must be ${q.exact?"exactly":q.inclusive?"less than or equal to":"less than"} ${q.maximum}`;else if(q.type==="date")W=`Date must be ${q.exact?"exactly":q.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(q.maximum))}`;else W="Invalid input";break;case H.custom:W="Invalid input";break;case H.invalid_intersection_types:W="Intersection results could not be merged";break;case H.not_multiple_of:W=`Number must be a multiple of ${q.multipleOf}`;break;case H.not_finite:W="Number must be finite";break;default:W=Q.defaultError,L.assertNever(q)}return{message:W}},aq=e;function R1(q){aq=q}function Kq(){return aq}var Nq=(q)=>{let{data:Q,path:W,errorMaps:J,issueData:X}=q,G=[...W,...X.path||[]],Y={...X,path:G};if(X.message!==void 0)return{...X,path:G,message:X.message};let B="",w=J.filter((R)=>!!R).slice().reverse();for(let R of w)B=R(Y,{data:Q,defaultError:B}).message;return{...X,path:G,message:B}},j1=[];function z(q,Q){let W=Kq(),J=Nq({issueData:Q,data:q.data,path:q.path,errorMaps:[q.common.contextualErrorMap,q.schemaErrorMap,W,W===e?void 0:e].filter((X)=>!!X)});q.common.issues.push(J)}class A{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(q,Q){let W=[];for(let J of Q){if(J.status==="aborted")return j;if(J.status==="dirty")q.dirty();W.push(J.value)}return{status:q.value,value:W}}static async mergeObjectAsync(q,Q){let W=[];for(let J of Q){let X=await J.key,G=await J.value;W.push({key:X,value:G})}return A.mergeObjectSync(q,W)}static mergeObjectSync(q,Q){let W={};for(let J of Q){let{key:X,value:G}=J;if(X.status==="aborted")return j;if(G.status==="aborted")return j;if(X.status==="dirty")q.dirty();if(G.status==="dirty")q.dirty();if(X.value!=="__proto__"&&(typeof G.value!=="undefined"||J.alwaysSet))W[X.value]=G.value}return{status:q.value,value:W}}}var j=Object.freeze({status:"aborted"}),t=(q)=>({status:"dirty",value:q}),D=(q)=>({status:"valid",value:q}),Zq=(q)=>q.status==="aborted",nq=(q)=>q.status==="dirty",Rq=(q)=>q.status==="valid",jq=(q)=>typeof Promise!=="undefined"&&q instanceof Promise;function vq(q,Q,W,J){if(W==="a"&&!J)throw new TypeError("Private accessor was defined without a getter");if(typeof Q==="function"?q!==Q||!J:!Q.has(q))throw new TypeError("Cannot read private member from an object whose class did not declare it");return W==="m"?J:W==="a"?J.call(q):J?J.value:Q.get(q)}function tq(q,Q,W,J,X){if(J==="m")throw new TypeError("Private method is not writable");if(J==="a"&&!X)throw new TypeError("Private accessor was defined without a setter");if(typeof Q==="function"?q!==Q||!X:!Q.has(q))throw new TypeError("Cannot write private member to an object whose class did not declare it");return J==="a"?X.call(q,W):X?X.value=W:Q.set(q,W),W}var _;(function(q){q.errToObj=(Q)=>typeof Q==="string"?{message:Q}:Q||{},q.toString=(Q)=>typeof Q==="string"?Q:Q===null||Q===void 0?void 0:Q.message})(_||(_={}));var _q,Eq;class f{constructor(q,Q,W,J){this._cachedPath=[],this.parent=q,this.data=Q,this._path=W,this._key=J}get path(){if(!this._cachedPath.length)if(this._key instanceof Array)this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var dq=(q,Q)=>{if(Rq(Q))return{success:!0,data:Q.value};else{if(!q.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let W=new F(q.common.issues);return this._error=W,this._error}}}};function O(q){if(!q)return{};let{errorMap:Q,invalid_type_error:W,required_error:J,description:X}=q;if(Q&&(W||J))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(Q)return{errorMap:Q,description:X};return{errorMap:(Y,B)=>{var w,R;let{message:U}=q;if(Y.code==="invalid_enum_value")return{message:U!==null&&U!==void 0?U:B.defaultError};if(typeof B.data==="undefined")return{message:(w=U!==null&&U!==void 0?U:J)!==null&&w!==void 0?w:B.defaultError};if(Y.code!=="invalid_type")return{message:B.defaultError};return{message:(R=U!==null&&U!==void 0?U:W)!==null&&R!==void 0?R:B.defaultError}},description:X}}class V{constructor(q){this.spa=this.safeParseAsync,this._def=q,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(q){return T(q.data)}_getOrReturnCtx(q,Q){return Q||{common:q.parent.common,data:q.data,parsedType:T(q.data),schemaErrorMap:this._def.errorMap,path:q.path,parent:q.parent}}_processInputParams(q){return{status:new A,ctx:{common:q.parent.common,data:q.data,parsedType:T(q.data),schemaErrorMap:this._def.errorMap,path:q.path,parent:q.parent}}}_parseSync(q){let Q=this._parse(q);if(jq(Q))throw new Error("Synchronous parse encountered promise.");return Q}_parseAsync(q){let Q=this._parse(q);return Promise.resolve(Q)}parse(q,Q){let W=this.safeParse(q,Q);if(W.success)return W.data;throw W.error}safeParse(q,Q){var W;let J={common:{issues:[],async:(W=Q===null||Q===void 0?void 0:Q.async)!==null&&W!==void 0?W:!1,contextualErrorMap:Q===null||Q===void 0?void 0:Q.errorMap},path:(Q===null||Q===void 0?void 0:Q.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:q,parsedType:T(q)},X=this._parseSync({data:q,path:J.path,parent:J});return dq(J,X)}async parseAsync(q,Q){let W=await this.safeParseAsync(q,Q);if(W.success)return W.data;throw W.error}async safeParseAsync(q,Q){let W={common:{issues:[],contextualErrorMap:Q===null||Q===void 0?void 0:Q.errorMap,async:!0},path:(Q===null||Q===void 0?void 0:Q.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:q,parsedType:T(q)},J=this._parse({data:q,path:W.path,parent:W}),X=await(jq(J)?J:Promise.resolve(J));return dq(W,X)}refine(q,Q){let W=(J)=>{if(typeof Q==="string"||typeof Q==="undefined")return{message:Q};else if(typeof Q==="function")return Q(J);else return Q};return this._refinement((J,X)=>{let G=q(J),Y=()=>X.addIssue({code:H.custom,...W(J)});if(typeof Promise!=="undefined"&&G instanceof Promise)return G.then((B)=>{if(!B)return Y(),!1;else return!0});if(!G)return Y(),!1;else return!0})}refinement(q,Q){return this._refinement((W,J)=>{if(!q(W))return J.addIssue(typeof Q==="function"?Q(W,J):Q),!1;else return!0})}_refinement(q){return new K({schema:this,typeName:E.ZodEffects,effect:{type:"refinement",refinement:q}})}superRefine(q){return this._refinement(q)}optional(){return b.create(this,this._def)}nullable(){return h.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return v.create(this,this._def)}promise(){return u.create(this,this._def)}or(q){return Xq.create([this,q],this._def)}and(q){return $q.create(this,q,this._def)}transform(q){return new K({...O(this._def),schema:this,typeName:E.ZodEffects,effect:{type:"transform",transform:q}})}default(q){let Q=typeof q==="function"?q:()=>q;return new Hq({...O(this._def),innerType:this,defaultValue:Q,typeName:E.ZodDefault})}brand(){return new fq({typeName:E.ZodBranded,type:this,...O(this._def)})}catch(q){let Q=typeof q==="function"?q:()=>q;return new Bq({...O(this._def),innerType:this,catchValue:Q,typeName:E.ZodCatch})}describe(q){return new this.constructor({...this._def,description:q})}pipe(q){return Aq.create(this,q)}readonly(){return wq.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var O1=/^c[^\s-]{8,}$/i,V1=/^[0-9a-z]+$/,L1=/^[0-9A-HJKMNP-TV-Z]{26}$/,U1=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,S1=/^[a-z0-9_-]{21}$/i,A1=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,D1=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,F1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",yq,K1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,N1=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,v1=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,sq="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",b1=new RegExp(`^${sq}$`);function eq(q){let Q="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";if(q.precision)Q=`${Q}\\.\\d{${q.precision}}`;else if(q.precision==null)Q=`${Q}(\\.\\d+)?`;return Q}function f1(q){return new RegExp(`^${eq(q)}$`)}function q1(q){let Q=`${sq}T${eq(q)}`,W=[];if(W.push(q.local?"Z?":"Z"),q.offset)W.push("([+-]\\d{2}:?\\d{2})");return Q=`${Q}(${W.join("|")})`,new RegExp(`^${Q}$`)}function C1(q,Q){if((Q==="v4"||!Q)&&K1.test(q))return!0;if((Q==="v6"||!Q)&&N1.test(q))return!0;return!1}class N extends V{_parse(q){if(this._def.coerce)q.data=String(q.data);if(this._getType(q)!==M.string){let X=this._getOrReturnCtx(q);return z(X,{code:H.invalid_type,expected:M.string,received:X.parsedType}),j}let W=new A,J=void 0;for(let X of this._def.checks)if(X.kind==="min"){if(q.data.length<X.value)J=this._getOrReturnCtx(q,J),z(J,{code:H.too_small,minimum:X.value,type:"string",inclusive:!0,exact:!1,message:X.message}),W.dirty()}else if(X.kind==="max"){if(q.data.length>X.value)J=this._getOrReturnCtx(q,J),z(J,{code:H.too_big,maximum:X.value,type:"string",inclusive:!0,exact:!1,message:X.message}),W.dirty()}else if(X.kind==="length"){let G=q.data.length>X.value,Y=q.data.length<X.value;if(G||Y){if(J=this._getOrReturnCtx(q,J),G)z(J,{code:H.too_big,maximum:X.value,type:"string",inclusive:!0,exact:!0,message:X.message});else if(Y)z(J,{code:H.too_small,minimum:X.value,type:"string",inclusive:!0,exact:!0,message:X.message});W.dirty()}}else if(X.kind==="email"){if(!D1.test(q.data))J=this._getOrReturnCtx(q,J),z(J,{validation:"email",code:H.invalid_string,message:X.message}),W.dirty()}else if(X.kind==="emoji"){if(!yq)yq=new RegExp(F1,"u");if(!yq.test(q.data))J=this._getOrReturnCtx(q,J),z(J,{validation:"emoji",code:H.invalid_string,message:X.message}),W.dirty()}else if(X.kind==="uuid"){if(!U1.test(q.data))J=this._getOrReturnCtx(q,J),z(J,{validation:"uuid",code:H.invalid_string,message:X.message}),W.dirty()}else if(X.kind==="nanoid"){if(!S1.test(q.data))J=this._getOrReturnCtx(q,J),z(J,{validation:"nanoid",code:H.invalid_string,message:X.message}),W.dirty()}else if(X.kind==="cuid"){if(!O1.test(q.data))J=this._getOrReturnCtx(q,J),z(J,{validation:"cuid",code:H.invalid_string,message:X.message}),W.dirty()}else if(X.kind==="cuid2"){if(!V1.test(q.data))J=this._getOrReturnCtx(q,J),z(J,{validation:"cuid2",code:H.invalid_string,message:X.message}),W.dirty()}else if(X.kind==="ulid"){if(!L1.test(q.data))J=this._getOrReturnCtx(q,J),z(J,{validation:"ulid",code:H.invalid_string,message:X.message}),W.dirty()}else if(X.kind==="url")try{new URL(q.data)}catch(G){J=this._getOrReturnCtx(q,J),z(J,{validation:"url",code:H.invalid_string,message:X.message}),W.dirty()}else if(X.kind==="regex"){if(X.regex.lastIndex=0,!X.regex.test(q.data))J=this._getOrReturnCtx(q,J),z(J,{validation:"regex",code:H.invalid_string,message:X.message}),W.dirty()}else if(X.kind==="trim")q.data=q.data.trim();else if(X.kind==="includes"){if(!q.data.includes(X.value,X.position))J=this._getOrReturnCtx(q,J),z(J,{code:H.invalid_string,validation:{includes:X.value,position:X.position},message:X.message}),W.dirty()}else if(X.kind==="toLowerCase")q.data=q.data.toLowerCase();else if(X.kind==="toUpperCase")q.data=q.data.toUpperCase();else if(X.kind==="startsWith"){if(!q.data.startsWith(X.value))J=this._getOrReturnCtx(q,J),z(J,{code:H.invalid_string,validation:{startsWith:X.value},message:X.message}),W.dirty()}else if(X.kind==="endsWith"){if(!q.data.endsWith(X.value))J=this._getOrReturnCtx(q,J),z(J,{code:H.invalid_string,validation:{endsWith:X.value},message:X.message}),W.dirty()}else if(X.kind==="datetime"){if(!q1(X).test(q.data))J=this._getOrReturnCtx(q,J),z(J,{code:H.invalid_string,validation:"datetime",message:X.message}),W.dirty()}else if(X.kind==="date"){if(!b1.test(q.data))J=this._getOrReturnCtx(q,J),z(J,{code:H.invalid_string,validation:"date",message:X.message}),W.dirty()}else if(X.kind==="time"){if(!f1(X).test(q.data))J=this._getOrReturnCtx(q,J),z(J,{code:H.invalid_string,validation:"time",message:X.message}),W.dirty()}else if(X.kind==="duration"){if(!A1.test(q.data))J=this._getOrReturnCtx(q,J),z(J,{validation:"duration",code:H.invalid_string,message:X.message}),W.dirty()}else if(X.kind==="ip"){if(!C1(q.data,X.version))J=this._getOrReturnCtx(q,J),z(J,{validation:"ip",code:H.invalid_string,message:X.message}),W.dirty()}else if(X.kind==="base64"){if(!v1.test(q.data))J=this._getOrReturnCtx(q,J),z(J,{validation:"base64",code:H.invalid_string,message:X.message}),W.dirty()}else L.assertNever(X);return{status:W.value,value:q.data}}_regex(q,Q,W){return this.refinement((J)=>q.test(J),{validation:Q,code:H.invalid_string,..._.errToObj(W)})}_addCheck(q){return new N({...this._def,checks:[...this._def.checks,q]})}email(q){return this._addCheck({kind:"email",..._.errToObj(q)})}url(q){return this._addCheck({kind:"url",..._.errToObj(q)})}emoji(q){return this._addCheck({kind:"emoji",..._.errToObj(q)})}uuid(q){return this._addCheck({kind:"uuid",..._.errToObj(q)})}nanoid(q){return this._addCheck({kind:"nanoid",..._.errToObj(q)})}cuid(q){return this._addCheck({kind:"cuid",..._.errToObj(q)})}cuid2(q){return this._addCheck({kind:"cuid2",..._.errToObj(q)})}ulid(q){return this._addCheck({kind:"ulid",..._.errToObj(q)})}base64(q){return this._addCheck({kind:"base64",..._.errToObj(q)})}ip(q){return this._addCheck({kind:"ip",..._.errToObj(q)})}datetime(q){var Q,W;if(typeof q==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:q});return this._addCheck({kind:"datetime",precision:typeof(q===null||q===void 0?void 0:q.precision)==="undefined"?null:q===null||q===void 0?void 0:q.precision,offset:(Q=q===null||q===void 0?void 0:q.offset)!==null&&Q!==void 0?Q:!1,local:(W=q===null||q===void 0?void 0:q.local)!==null&&W!==void 0?W:!1,..._.errToObj(q===null||q===void 0?void 0:q.message)})}date(q){return this._addCheck({kind:"date",message:q})}time(q){if(typeof q==="string")return this._addCheck({kind:"time",precision:null,message:q});return this._addCheck({kind:"time",precision:typeof(q===null||q===void 0?void 0:q.precision)==="undefined"?null:q===null||q===void 0?void 0:q.precision,..._.errToObj(q===null||q===void 0?void 0:q.message)})}duration(q){return this._addCheck({kind:"duration",..._.errToObj(q)})}regex(q,Q){return this._addCheck({kind:"regex",regex:q,..._.errToObj(Q)})}includes(q,Q){return this._addCheck({kind:"includes",value:q,position:Q===null||Q===void 0?void 0:Q.position,..._.errToObj(Q===null||Q===void 0?void 0:Q.message)})}startsWith(q,Q){return this._addCheck({kind:"startsWith",value:q,..._.errToObj(Q)})}endsWith(q,Q){return this._addCheck({kind:"endsWith",value:q,..._.errToObj(Q)})}min(q,Q){return this._addCheck({kind:"min",value:q,..._.errToObj(Q)})}max(q,Q){return this._addCheck({kind:"max",value:q,..._.errToObj(Q)})}length(q,Q){return this._addCheck({kind:"length",value:q,..._.errToObj(Q)})}nonempty(q){return this.min(1,_.errToObj(q))}trim(){return new N({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new N({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new N({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((q)=>q.kind==="datetime")}get isDate(){return!!this._def.checks.find((q)=>q.kind==="date")}get isTime(){return!!this._def.checks.find((q)=>q.kind==="time")}get isDuration(){return!!this._def.checks.find((q)=>q.kind==="duration")}get isEmail(){return!!this._def.checks.find((q)=>q.kind==="email")}get isURL(){return!!this._def.checks.find((q)=>q.kind==="url")}get isEmoji(){return!!this._def.checks.find((q)=>q.kind==="emoji")}get isUUID(){return!!this._def.checks.find((q)=>q.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((q)=>q.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((q)=>q.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((q)=>q.kind==="cuid2")}get isULID(){return!!this._def.checks.find((q)=>q.kind==="ulid")}get isIP(){return!!this._def.checks.find((q)=>q.kind==="ip")}get isBase64(){return!!this._def.checks.find((q)=>q.kind==="base64")}get minLength(){let q=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(q===null||Q.value>q)q=Q.value}return q}get maxLength(){let q=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(q===null||Q.value<q)q=Q.value}return q}}N.create=(q)=>{var Q;return new N({checks:[],typeName:E.ZodString,coerce:(Q=q===null||q===void 0?void 0:q.coerce)!==null&&Q!==void 0?Q:!1,...O(q)})};function k1(q,Q){let W=(q.toString().split(".")[1]||"").length,J=(Q.toString().split(".")[1]||"").length,X=W>J?W:J,G=parseInt(q.toFixed(X).replace(".","")),Y=parseInt(Q.toFixed(X).replace(".",""));return G%Y/Math.pow(10,X)}class l extends V{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(q){if(this._def.coerce)q.data=Number(q.data);if(this._getType(q)!==M.number){let X=this._getOrReturnCtx(q);return z(X,{code:H.invalid_type,expected:M.number,received:X.parsedType}),j}let W=void 0,J=new A;for(let X of this._def.checks)if(X.kind==="int"){if(!L.isInteger(q.data))W=this._getOrReturnCtx(q,W),z(W,{code:H.invalid_type,expected:"integer",received:"float",message:X.message}),J.dirty()}else if(X.kind==="min"){if(X.inclusive?q.data<X.value:q.data<=X.value)W=this._getOrReturnCtx(q,W),z(W,{code:H.too_small,minimum:X.value,type:"number",inclusive:X.inclusive,exact:!1,message:X.message}),J.dirty()}else if(X.kind==="max"){if(X.inclusive?q.data>X.value:q.data>=X.value)W=this._getOrReturnCtx(q,W),z(W,{code:H.too_big,maximum:X.value,type:"number",inclusive:X.inclusive,exact:!1,message:X.message}),J.dirty()}else if(X.kind==="multipleOf"){if(k1(q.data,X.value)!==0)W=this._getOrReturnCtx(q,W),z(W,{code:H.not_multiple_of,multipleOf:X.value,message:X.message}),J.dirty()}else if(X.kind==="finite"){if(!Number.isFinite(q.data))W=this._getOrReturnCtx(q,W),z(W,{code:H.not_finite,message:X.message}),J.dirty()}else L.assertNever(X);return{status:J.value,value:q.data}}gte(q,Q){return this.setLimit("min",q,!0,_.toString(Q))}gt(q,Q){return this.setLimit("min",q,!1,_.toString(Q))}lte(q,Q){return this.setLimit("max",q,!0,_.toString(Q))}lt(q,Q){return this.setLimit("max",q,!1,_.toString(Q))}setLimit(q,Q,W,J){return new l({...this._def,checks:[...this._def.checks,{kind:q,value:Q,inclusive:W,message:_.toString(J)}]})}_addCheck(q){return new l({...this._def,checks:[...this._def.checks,q]})}int(q){return this._addCheck({kind:"int",message:_.toString(q)})}positive(q){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_.toString(q)})}negative(q){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_.toString(q)})}nonpositive(q){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_.toString(q)})}nonnegative(q){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_.toString(q)})}multipleOf(q,Q){return this._addCheck({kind:"multipleOf",value:q,message:_.toString(Q)})}finite(q){return this._addCheck({kind:"finite",message:_.toString(q)})}safe(q){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_.toString(q)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_.toString(q)})}get minValue(){let q=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(q===null||Q.value>q)q=Q.value}return q}get maxValue(){let q=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(q===null||Q.value<q)q=Q.value}return q}get isInt(){return!!this._def.checks.find((q)=>q.kind==="int"||q.kind==="multipleOf"&&L.isInteger(q.value))}get isFinite(){let q=null,Q=null;for(let W of this._def.checks)if(W.kind==="finite"||W.kind==="int"||W.kind==="multipleOf")return!0;else if(W.kind==="min"){if(Q===null||W.value>Q)Q=W.value}else if(W.kind==="max"){if(q===null||W.value<q)q=W.value}return Number.isFinite(Q)&&Number.isFinite(q)}}l.create=(q)=>{return new l({checks:[],typeName:E.ZodNumber,coerce:(q===null||q===void 0?void 0:q.coerce)||!1,...O(q)})};class y extends V{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(q){if(this._def.coerce)q.data=BigInt(q.data);if(this._getType(q)!==M.bigint){let X=this._getOrReturnCtx(q);return z(X,{code:H.invalid_type,expected:M.bigint,received:X.parsedType}),j}let W=void 0,J=new A;for(let X of this._def.checks)if(X.kind==="min"){if(X.inclusive?q.data<X.value:q.data<=X.value)W=this._getOrReturnCtx(q,W),z(W,{code:H.too_small,type:"bigint",minimum:X.value,inclusive:X.inclusive,message:X.message}),J.dirty()}else if(X.kind==="max"){if(X.inclusive?q.data>X.value:q.data>=X.value)W=this._getOrReturnCtx(q,W),z(W,{code:H.too_big,type:"bigint",maximum:X.value,inclusive:X.inclusive,message:X.message}),J.dirty()}else if(X.kind==="multipleOf"){if(q.data%X.value!==BigInt(0))W=this._getOrReturnCtx(q,W),z(W,{code:H.not_multiple_of,multipleOf:X.value,message:X.message}),J.dirty()}else L.assertNever(X);return{status:J.value,value:q.data}}gte(q,Q){return this.setLimit("min",q,!0,_.toString(Q))}gt(q,Q){return this.setLimit("min",q,!1,_.toString(Q))}lte(q,Q){return this.setLimit("max",q,!0,_.toString(Q))}lt(q,Q){return this.setLimit("max",q,!1,_.toString(Q))}setLimit(q,Q,W,J){return new y({...this._def,checks:[...this._def.checks,{kind:q,value:Q,inclusive:W,message:_.toString(J)}]})}_addCheck(q){return new y({...this._def,checks:[...this._def.checks,q]})}positive(q){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_.toString(q)})}negative(q){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_.toString(q)})}nonpositive(q){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_.toString(q)})}nonnegative(q){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_.toString(q)})}multipleOf(q,Q){return this._addCheck({kind:"multipleOf",value:q,message:_.toString(Q)})}get minValue(){let q=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(q===null||Q.value>q)q=Q.value}return q}get maxValue(){let q=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(q===null||Q.value<q)q=Q.value}return q}}y.create=(q)=>{var Q;return new y({checks:[],typeName:E.ZodBigInt,coerce:(Q=q===null||q===void 0?void 0:q.coerce)!==null&&Q!==void 0?Q:!1,...O(q)})};class qq extends V{_parse(q){if(this._def.coerce)q.data=Boolean(q.data);if(this._getType(q)!==M.boolean){let W=this._getOrReturnCtx(q);return z(W,{code:H.invalid_type,expected:M.boolean,received:W.parsedType}),j}return D(q.data)}}qq.create=(q)=>{return new qq({typeName:E.ZodBoolean,coerce:(q===null||q===void 0?void 0:q.coerce)||!1,...O(q)})};class Z extends V{_parse(q){if(this._def.coerce)q.data=new Date(q.data);if(this._getType(q)!==M.date){let X=this._getOrReturnCtx(q);return z(X,{code:H.invalid_type,expected:M.date,received:X.parsedType}),j}if(isNaN(q.data.getTime())){let X=this._getOrReturnCtx(q);return z(X,{code:H.invalid_date}),j}let W=new A,J=void 0;for(let X of this._def.checks)if(X.kind==="min"){if(q.data.getTime()<X.value)J=this._getOrReturnCtx(q,J),z(J,{code:H.too_small,message:X.message,inclusive:!0,exact:!1,minimum:X.value,type:"date"}),W.dirty()}else if(X.kind==="max"){if(q.data.getTime()>X.value)J=this._getOrReturnCtx(q,J),z(J,{code:H.too_big,message:X.message,inclusive:!0,exact:!1,maximum:X.value,type:"date"}),W.dirty()}else L.assertNever(X);return{status:W.value,value:new Date(q.data.getTime())}}_addCheck(q){return new Z({...this._def,checks:[...this._def.checks,q]})}min(q,Q){return this._addCheck({kind:"min",value:q.getTime(),message:_.toString(Q)})}max(q,Q){return this._addCheck({kind:"max",value:q.getTime(),message:_.toString(Q)})}get minDate(){let q=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(q===null||Q.value>q)q=Q.value}return q!=null?new Date(q):null}get maxDate(){let q=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(q===null||Q.value<q)q=Q.value}return q!=null?new Date(q):null}}Z.create=(q)=>{return new Z({checks:[],coerce:(q===null||q===void 0?void 0:q.coerce)||!1,typeName:E.ZodDate,...O(q)})};class Oq extends V{_parse(q){if(this._getType(q)!==M.symbol){let W=this._getOrReturnCtx(q);return z(W,{code:H.invalid_type,expected:M.symbol,received:W.parsedType}),j}return D(q.data)}}Oq.create=(q)=>{return new Oq({typeName:E.ZodSymbol,...O(q)})};class Qq extends V{_parse(q){if(this._getType(q)!==M.undefined){let W=this._getOrReturnCtx(q);return z(W,{code:H.invalid_type,expected:M.undefined,received:W.parsedType}),j}return D(q.data)}}Qq.create=(q)=>{return new Qq({typeName:E.ZodUndefined,...O(q)})};class Wq extends V{_parse(q){if(this._getType(q)!==M.null){let W=this._getOrReturnCtx(q);return z(W,{code:H.invalid_type,expected:M.null,received:W.parsedType}),j}return D(q.data)}}Wq.create=(q)=>{return new Wq({typeName:E.ZodNull,...O(q)})};class n extends V{constructor(){super(...arguments);this._any=!0}_parse(q){return D(q.data)}}n.create=(q)=>{return new n({typeName:E.ZodAny,...O(q)})};class x extends V{constructor(){super(...arguments);this._unknown=!0}_parse(q){return D(q.data)}}x.create=(q)=>{return new x({typeName:E.ZodUnknown,...O(q)})};class k extends V{_parse(q){let Q=this._getOrReturnCtx(q);return z(Q,{code:H.invalid_type,expected:M.never,received:Q.parsedType}),j}}k.create=(q)=>{return new k({typeName:E.ZodNever,...O(q)})};class Vq extends V{_parse(q){if(this._getType(q)!==M.undefined){let W=this._getOrReturnCtx(q);return z(W,{code:H.invalid_type,expected:M.void,received:W.parsedType}),j}return D(q.data)}}Vq.create=(q)=>{return new Vq({typeName:E.ZodVoid,...O(q)})};class v extends V{_parse(q){let{ctx:Q,status:W}=this._processInputParams(q),J=this._def;if(Q.parsedType!==M.array)return z(Q,{code:H.invalid_type,expected:M.array,received:Q.parsedType}),j;if(J.exactLength!==null){let G=Q.data.length>J.exactLength.value,Y=Q.data.length<J.exactLength.value;if(G||Y)z(Q,{code:G?H.too_big:H.too_small,minimum:Y?J.exactLength.value:void 0,maximum:G?J.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:J.exactLength.message}),W.dirty()}if(J.minLength!==null){if(Q.data.length<J.minLength.value)z(Q,{code:H.too_small,minimum:J.minLength.value,type:"array",inclusive:!0,exact:!1,message:J.minLength.message}),W.dirty()}if(J.maxLength!==null){if(Q.data.length>J.maxLength.value)z(Q,{code:H.too_big,maximum:J.maxLength.value,type:"array",inclusive:!0,exact:!1,message:J.maxLength.message}),W.dirty()}if(Q.common.async)return Promise.all([...Q.data].map((G,Y)=>{return J.type._parseAsync(new f(Q,G,Q.path,Y))})).then((G)=>{return A.mergeArray(W,G)});let X=[...Q.data].map((G,Y)=>{return J.type._parseSync(new f(Q,G,Q.path,Y))});return A.mergeArray(W,X)}get element(){return this._def.type}min(q,Q){return new v({...this._def,minLength:{value:q,message:_.toString(Q)}})}max(q,Q){return new v({...this._def,maxLength:{value:q,message:_.toString(Q)}})}length(q,Q){return new v({...this._def,exactLength:{value:q,message:_.toString(Q)}})}nonempty(q){return this.min(1,q)}}v.create=(q,Q)=>{return new v({type:q,minLength:null,maxLength:null,exactLength:null,typeName:E.ZodArray,...O(Q)})};function a(q){if(q instanceof S){let Q={};for(let W in q.shape){let J=q.shape[W];Q[W]=b.create(a(J))}return new S({...q._def,shape:()=>Q})}else if(q instanceof v)return new v({...q._def,type:a(q.element)});else if(q instanceof b)return b.create(a(q.unwrap()));else if(q instanceof h)return h.create(a(q.unwrap()));else if(q instanceof I)return I.create(q.items.map((Q)=>a(Q)));else return q}class S extends V{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let q=this._def.shape(),Q=L.objectKeys(q);return this._cached={shape:q,keys:Q}}_parse(q){if(this._getType(q)!==M.object){let w=this._getOrReturnCtx(q);return z(w,{code:H.invalid_type,expected:M.object,received:w.parsedType}),j}let{status:W,ctx:J}=this._processInputParams(q),{shape:X,keys:G}=this._getCached(),Y=[];if(!(this._def.catchall instanceof k&&this._def.unknownKeys==="strip")){for(let w in J.data)if(!G.includes(w))Y.push(w)}let B=[];for(let w of G){let R=X[w],U=J.data[w];B.push({key:{status:"valid",value:w},value:R._parse(new f(J,U,J.path,w)),alwaysSet:w in J.data})}if(this._def.catchall instanceof k){let w=this._def.unknownKeys;if(w==="passthrough")for(let R of Y)B.push({key:{status:"valid",value:R},value:{status:"valid",value:J.data[R]}});else if(w==="strict"){if(Y.length>0)z(J,{code:H.unrecognized_keys,keys:Y}),W.dirty()}else if(w==="strip");else throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let w=this._def.catchall;for(let R of Y){let U=J.data[R];B.push({key:{status:"valid",value:R},value:w._parse(new f(J,U,J.path,R)),alwaysSet:R in J.data})}}if(J.common.async)return Promise.resolve().then(async()=>{let w=[];for(let R of B){let U=await R.key,iq=await R.value;w.push({key:U,value:iq,alwaysSet:R.alwaysSet})}return w}).then((w)=>{return A.mergeObjectSync(W,w)});else return A.mergeObjectSync(W,B)}get shape(){return this._def.shape()}strict(q){return _.errToObj,new S({...this._def,unknownKeys:"strict",...q!==void 0?{errorMap:(Q,W)=>{var J,X,G,Y;let B=(G=(X=(J=this._def).errorMap)===null||X===void 0?void 0:X.call(J,Q,W).message)!==null&&G!==void 0?G:W.defaultError;if(Q.code==="unrecognized_keys")return{message:(Y=_.errToObj(q).message)!==null&&Y!==void 0?Y:B};return{message:B}}}:{}})}strip(){return new S({...this._def,unknownKeys:"strip"})}passthrough(){return new S({...this._def,unknownKeys:"passthrough"})}extend(q){return new S({...this._def,shape:()=>({...this._def.shape(),...q})})}merge(q){return new S({unknownKeys:q._def.unknownKeys,catchall:q._def.catchall,shape:()=>({...this._def.shape(),...q._def.shape()}),typeName:E.ZodObject})}setKey(q,Q){return this.augment({[q]:Q})}catchall(q){return new S({...this._def,catchall:q})}pick(q){let Q={};return L.objectKeys(q).forEach((W)=>{if(q[W]&&this.shape[W])Q[W]=this.shape[W]}),new S({...this._def,shape:()=>Q})}omit(q){let Q={};return L.objectKeys(this.shape).forEach((W)=>{if(!q[W])Q[W]=this.shape[W]}),new S({...this._def,shape:()=>Q})}deepPartial(){return a(this)}partial(q){let Q={};return L.objectKeys(this.shape).forEach((W)=>{let J=this.shape[W];if(q&&!q[W])Q[W]=J;else Q[W]=J.optional()}),new S({...this._def,shape:()=>Q})}required(q){let Q={};return L.objectKeys(this.shape).forEach((W)=>{if(q&&!q[W])Q[W]=this.shape[W];else{let X=this.shape[W];while(X instanceof b)X=X._def.innerType;Q[W]=X}}),new S({...this._def,shape:()=>Q})}keyof(){return Q1(L.objectKeys(this.shape))}}S.create=(q,Q)=>{return new S({shape:()=>q,unknownKeys:"strip",catchall:k.create(),typeName:E.ZodObject,...O(Q)})};S.strictCreate=(q,Q)=>{return new S({shape:()=>q,unknownKeys:"strict",catchall:k.create(),typeName:E.ZodObject,...O(Q)})};S.lazycreate=(q,Q)=>{return new S({shape:q,unknownKeys:"strip",catchall:k.create(),typeName:E.ZodObject,...O(Q)})};class Xq extends V{_parse(q){let{ctx:Q}=this._processInputParams(q),W=this._def.options;function J(X){for(let Y of X)if(Y.result.status==="valid")return Y.result;for(let Y of X)if(Y.result.status==="dirty")return Q.common.issues.push(...Y.ctx.common.issues),Y.result;let G=X.map((Y)=>new F(Y.ctx.common.issues));return z(Q,{code:H.invalid_union,unionErrors:G}),j}if(Q.common.async)return Promise.all(W.map(async(X)=>{let G={...Q,common:{...Q.common,issues:[]},parent:null};return{result:await X._parseAsync({data:Q.data,path:Q.path,parent:G}),ctx:G}})).then(J);else{let X=void 0,G=[];for(let B of W){let w={...Q,common:{...Q.common,issues:[]},parent:null},R=B._parseSync({data:Q.data,path:Q.path,parent:w});if(R.status==="valid")return R;else if(R.status==="dirty"&&!X)X={result:R,ctx:w};if(w.common.issues.length)G.push(w.common.issues)}if(X)return Q.common.issues.push(...X.ctx.common.issues),X.result;let Y=G.map((B)=>new F(B));return z(Q,{code:H.invalid_union,unionErrors:Y}),j}}get options(){return this._def.options}}Xq.create=(q,Q)=>{return new Xq({options:q,typeName:E.ZodUnion,...O(Q)})};var P=(q)=>{if(q instanceof Jq)return P(q.schema);else if(q instanceof K)return P(q.innerType());else if(q instanceof Gq)return[q.value];else if(q instanceof m)return q.options;else if(q instanceof Yq)return L.objectValues(q.enum);else if(q instanceof Hq)return P(q._def.innerType);else if(q instanceof Qq)return[void 0];else if(q instanceof Wq)return[null];else if(q instanceof b)return[void 0,...P(q.unwrap())];else if(q instanceof h)return[null,...P(q.unwrap())];else if(q instanceof fq)return P(q.unwrap());else if(q instanceof wq)return P(q.unwrap());else if(q instanceof Bq)return P(q._def.innerType);else return[]};class bq extends V{_parse(q){let{ctx:Q}=this._processInputParams(q);if(Q.parsedType!==M.object)return z(Q,{code:H.invalid_type,expected:M.object,received:Q.parsedType}),j;let W=this.discriminator,J=Q.data[W],X=this.optionsMap.get(J);if(!X)return z(Q,{code:H.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[W]}),j;if(Q.common.async)return X._parseAsync({data:Q.data,path:Q.path,parent:Q});else return X._parseSync({data:Q.data,path:Q.path,parent:Q})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(q,Q,W){let J=new Map;for(let X of Q){let G=P(X.shape[q]);if(!G.length)throw new Error(`A discriminator value for key \`${q}\` could not be extracted from all schema options`);for(let Y of G){if(J.has(Y))throw new Error(`Discriminator property ${String(q)} has duplicate value ${String(Y)}`);J.set(Y,X)}}return new bq({typeName:E.ZodDiscriminatedUnion,discriminator:q,options:Q,optionsMap:J,...O(W)})}}function cq(q,Q){let W=T(q),J=T(Q);if(q===Q)return{valid:!0,data:q};else if(W===M.object&&J===M.object){let X=L.objectKeys(Q),G=L.objectKeys(q).filter((B)=>X.indexOf(B)!==-1),Y={...q,...Q};for(let B of G){let w=cq(q[B],Q[B]);if(!w.valid)return{valid:!1};Y[B]=w.data}return{valid:!0,data:Y}}else if(W===M.array&&J===M.array){if(q.length!==Q.length)return{valid:!1};let X=[];for(let G=0;G<q.length;G++){let Y=q[G],B=Q[G],w=cq(Y,B);if(!w.valid)return{valid:!1};X.push(w.data)}return{valid:!0,data:X}}else if(W===M.date&&J===M.date&&+q===+Q)return{valid:!0,data:q};else return{valid:!1}}class $q extends V{_parse(q){let{status:Q,ctx:W}=this._processInputParams(q),J=(X,G)=>{if(Zq(X)||Zq(G))return j;let Y=cq(X.value,G.value);if(!Y.valid)return z(W,{code:H.invalid_intersection_types}),j;if(nq(X)||nq(G))Q.dirty();return{status:Q.value,value:Y.data}};if(W.common.async)return Promise.all([this._def.left._parseAsync({data:W.data,path:W.path,parent:W}),this._def.right._parseAsync({data:W.data,path:W.path,parent:W})]).then(([X,G])=>J(X,G));else return J(this._def.left._parseSync({data:W.data,path:W.path,parent:W}),this._def.right._parseSync({data:W.data,path:W.path,parent:W}))}}$q.create=(q,Q,W)=>{return new $q({left:q,right:Q,typeName:E.ZodIntersection,...O(W)})};class I extends V{_parse(q){let{status:Q,ctx:W}=this._processInputParams(q);if(W.parsedType!==M.array)return z(W,{code:H.invalid_type,expected:M.array,received:W.parsedType}),j;if(W.data.length<this._def.items.length)return z(W,{code:H.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),j;if(!this._def.rest&&W.data.length>this._def.items.length)z(W,{code:H.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Q.dirty();let X=[...W.data].map((G,Y)=>{let B=this._def.items[Y]||this._def.rest;if(!B)return null;return B._parse(new f(W,G,W.path,Y))}).filter((G)=>!!G);if(W.common.async)return Promise.all(X).then((G)=>{return A.mergeArray(Q,G)});else return A.mergeArray(Q,X)}get items(){return this._def.items}rest(q){return new I({...this._def,rest:q})}}I.create=(q,Q)=>{if(!Array.isArray(q))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new I({items:q,typeName:E.ZodTuple,rest:null,...O(Q)})};class Lq extends V{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(q){let{status:Q,ctx:W}=this._processInputParams(q);if(W.parsedType!==M.object)return z(W,{code:H.invalid_type,expected:M.object,received:W.parsedType}),j;let J=[],X=this._def.keyType,G=this._def.valueType;for(let Y in W.data)J.push({key:X._parse(new f(W,Y,W.path,Y)),value:G._parse(new f(W,W.data[Y],W.path,Y)),alwaysSet:Y in W.data});if(W.common.async)return A.mergeObjectAsync(Q,J);else return A.mergeObjectSync(Q,J)}get element(){return this._def.valueType}static create(q,Q,W){if(Q instanceof V)return new Lq({keyType:q,valueType:Q,typeName:E.ZodRecord,...O(W)});return new Lq({keyType:N.create(),valueType:q,typeName:E.ZodRecord,...O(Q)})}}class Uq extends V{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(q){let{status:Q,ctx:W}=this._processInputParams(q);if(W.parsedType!==M.map)return z(W,{code:H.invalid_type,expected:M.map,received:W.parsedType}),j;let J=this._def.keyType,X=this._def.valueType,G=[...W.data.entries()].map(([Y,B],w)=>{return{key:J._parse(new f(W,Y,W.path,[w,"key"])),value:X._parse(new f(W,B,W.path,[w,"value"]))}});if(W.common.async){let Y=new Map;return Promise.resolve().then(async()=>{for(let B of G){let w=await B.key,R=await B.value;if(w.status==="aborted"||R.status==="aborted")return j;if(w.status==="dirty"||R.status==="dirty")Q.dirty();Y.set(w.value,R.value)}return{status:Q.value,value:Y}})}else{let Y=new Map;for(let B of G){let{key:w,value:R}=B;if(w.status==="aborted"||R.status==="aborted")return j;if(w.status==="dirty"||R.status==="dirty")Q.dirty();Y.set(w.value,R.value)}return{status:Q.value,value:Y}}}}Uq.create=(q,Q,W)=>{return new Uq({valueType:Q,keyType:q,typeName:E.ZodMap,...O(W)})};class c extends V{_parse(q){let{status:Q,ctx:W}=this._processInputParams(q);if(W.parsedType!==M.set)return z(W,{code:H.invalid_type,expected:M.set,received:W.parsedType}),j;let J=this._def;if(J.minSize!==null){if(W.data.size<J.minSize.value)z(W,{code:H.too_small,minimum:J.minSize.value,type:"set",inclusive:!0,exact:!1,message:J.minSize.message}),Q.dirty()}if(J.maxSize!==null){if(W.data.size>J.maxSize.value)z(W,{code:H.too_big,maximum:J.maxSize.value,type:"set",inclusive:!0,exact:!1,message:J.maxSize.message}),Q.dirty()}let X=this._def.valueType;function G(B){let w=new Set;for(let R of B){if(R.status==="aborted")return j;if(R.status==="dirty")Q.dirty();w.add(R.value)}return{status:Q.value,value:w}}let Y=[...W.data.values()].map((B,w)=>X._parse(new f(W,B,W.path,w)));if(W.common.async)return Promise.all(Y).then((B)=>G(B));else return G(Y)}min(q,Q){return new c({...this._def,minSize:{value:q,message:_.toString(Q)}})}max(q,Q){return new c({...this._def,maxSize:{value:q,message:_.toString(Q)}})}size(q,Q){return this.min(q,Q).max(q,Q)}nonempty(q){return this.min(1,q)}}c.create=(q,Q)=>{return new c({valueType:q,minSize:null,maxSize:null,typeName:E.ZodSet,...O(Q)})};class s extends V{constructor(){super(...arguments);this.validate=this.implement}_parse(q){let{ctx:Q}=this._processInputParams(q);if(Q.parsedType!==M.function)return z(Q,{code:H.invalid_type,expected:M.function,received:Q.parsedType}),j;function W(Y,B){return Nq({data:Y,path:Q.path,errorMaps:[Q.common.contextualErrorMap,Q.schemaErrorMap,Kq(),e].filter((w)=>!!w),issueData:{code:H.invalid_arguments,argumentsError:B}})}function J(Y,B){return Nq({data:Y,path:Q.path,errorMaps:[Q.common.contextualErrorMap,Q.schemaErrorMap,Kq(),e].filter((w)=>!!w),issueData:{code:H.invalid_return_type,returnTypeError:B}})}let X={errorMap:Q.common.contextualErrorMap},G=Q.data;if(this._def.returns instanceof u){let Y=this;return D(async function(...B){let w=new F([]),R=await Y._def.args.parseAsync(B,X).catch((kq)=>{throw w.addIssue(W(B,kq)),w}),U=await Reflect.apply(G,this,R);return await Y._def.returns._def.type.parseAsync(U,X).catch((kq)=>{throw w.addIssue(J(U,kq)),w})})}else{let Y=this;return D(function(...B){let w=Y._def.args.safeParse(B,X);if(!w.success)throw new F([W(B,w.error)]);let R=Reflect.apply(G,this,w.data),U=Y._def.returns.safeParse(R,X);if(!U.success)throw new F([J(R,U.error)]);return U.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...q){return new s({...this._def,args:I.create(q).rest(x.create())})}returns(q){return new s({...this._def,returns:q})}implement(q){return this.parse(q)}strictImplement(q){return this.parse(q)}static create(q,Q,W){return new s({args:q?q:I.create([]).rest(x.create()),returns:Q||x.create(),typeName:E.ZodFunction,...O(W)})}}class Jq extends V{get schema(){return this._def.getter()}_parse(q){let{ctx:Q}=this._processInputParams(q);return this._def.getter()._parse({data:Q.data,path:Q.path,parent:Q})}}Jq.create=(q,Q)=>{return new Jq({getter:q,typeName:E.ZodLazy,...O(Q)})};class Gq extends V{_parse(q){if(q.data!==this._def.value){let Q=this._getOrReturnCtx(q);return z(Q,{received:Q.data,code:H.invalid_literal,expected:this._def.value}),j}return{status:"valid",value:q.data}}get value(){return this._def.value}}Gq.create=(q,Q)=>{return new Gq({value:q,typeName:E.ZodLiteral,...O(Q)})};function Q1(q,Q){return new m({values:q,typeName:E.ZodEnum,...O(Q)})}class m extends V{constructor(){super(...arguments);_q.set(this,void 0)}_parse(q){if(typeof q.data!=="string"){let Q=this._getOrReturnCtx(q),W=this._def.values;return z(Q,{expected:L.joinValues(W),received:Q.parsedType,code:H.invalid_type}),j}if(!vq(this,_q,"f"))tq(this,_q,new Set(this._def.values),"f");if(!vq(this,_q,"f").has(q.data)){let Q=this._getOrReturnCtx(q),W=this._def.values;return z(Q,{received:Q.data,code:H.invalid_enum_value,options:W}),j}return D(q.data)}get options(){return this._def.values}get enum(){let q={};for(let Q of this._def.values)q[Q]=Q;return q}get Values(){let q={};for(let Q of this._def.values)q[Q]=Q;return q}get Enum(){let q={};for(let Q of this._def.values)q[Q]=Q;return q}extract(q,Q=this._def){return m.create(q,{...this._def,...Q})}exclude(q,Q=this._def){return m.create(this.options.filter((W)=>!q.includes(W)),{...this._def,...Q})}}_q=new WeakMap;m.create=Q1;class Yq extends V{constructor(){super(...arguments);Eq.set(this,void 0)}_parse(q){let Q=L.getValidEnumValues(this._def.values),W=this._getOrReturnCtx(q);if(W.parsedType!==M.string&&W.parsedType!==M.number){let J=L.objectValues(Q);return z(W,{expected:L.joinValues(J),received:W.parsedType,code:H.invalid_type}),j}if(!vq(this,Eq,"f"))tq(this,Eq,new Set(L.getValidEnumValues(this._def.values)),"f");if(!vq(this,Eq,"f").has(q.data)){let J=L.objectValues(Q);return z(W,{received:W.data,code:H.invalid_enum_value,options:J}),j}return D(q.data)}get enum(){return this._def.values}}Eq=new WeakMap;Yq.create=(q,Q)=>{return new Yq({values:q,typeName:E.ZodNativeEnum,...O(Q)})};class u extends V{unwrap(){return this._def.type}_parse(q){let{ctx:Q}=this._processInputParams(q);if(Q.parsedType!==M.promise&&Q.common.async===!1)return z(Q,{code:H.invalid_type,expected:M.promise,received:Q.parsedType}),j;let W=Q.parsedType===M.promise?Q.data:Promise.resolve(Q.data);return D(W.then((J)=>{return this._def.type.parseAsync(J,{path:Q.path,errorMap:Q.common.contextualErrorMap})}))}}u.create=(q,Q)=>{return new u({type:q,typeName:E.ZodPromise,...O(Q)})};class K extends V{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===E.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(q){let{status:Q,ctx:W}=this._processInputParams(q),J=this._def.effect||null,X={addIssue:(G)=>{if(z(W,G),G.fatal)Q.abort();else Q.dirty()},get path(){return W.path}};if(X.addIssue=X.addIssue.bind(X),J.type==="preprocess"){let G=J.transform(W.data,X);if(W.common.async)return Promise.resolve(G).then(async(Y)=>{if(Q.value==="aborted")return j;let B=await this._def.schema._parseAsync({data:Y,path:W.path,parent:W});if(B.status==="aborted")return j;if(B.status==="dirty")return t(B.value);if(Q.value==="dirty")return t(B.value);return B});else{if(Q.value==="aborted")return j;let Y=this._def.schema._parseSync({data:G,path:W.path,parent:W});if(Y.status==="aborted")return j;if(Y.status==="dirty")return t(Y.value);if(Q.value==="dirty")return t(Y.value);return Y}}if(J.type==="refinement"){let G=(Y)=>{let B=J.refinement(Y,X);if(W.common.async)return Promise.resolve(B);if(B instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return Y};if(W.common.async===!1){let Y=this._def.schema._parseSync({data:W.data,path:W.path,parent:W});if(Y.status==="aborted")return j;if(Y.status==="dirty")Q.dirty();return G(Y.value),{status:Q.value,value:Y.value}}else return this._def.schema._parseAsync({data:W.data,path:W.path,parent:W}).then((Y)=>{if(Y.status==="aborted")return j;if(Y.status==="dirty")Q.dirty();return G(Y.value).then(()=>{return{status:Q.value,value:Y.value}})})}if(J.type==="transform")if(W.common.async===!1){let G=this._def.schema._parseSync({data:W.data,path:W.path,parent:W});if(!Rq(G))return G;let Y=J.transform(G.value,X);if(Y instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:Q.value,value:Y}}else return this._def.schema._parseAsync({data:W.data,path:W.path,parent:W}).then((G)=>{if(!Rq(G))return G;return Promise.resolve(J.transform(G.value,X)).then((Y)=>({status:Q.value,value:Y}))});L.assertNever(J)}}K.create=(q,Q,W)=>{return new K({schema:q,typeName:E.ZodEffects,effect:Q,...O(W)})};K.createWithPreprocess=(q,Q,W)=>{return new K({schema:Q,effect:{type:"preprocess",transform:q},typeName:E.ZodEffects,...O(W)})};class b extends V{_parse(q){if(this._getType(q)===M.undefined)return D(void 0);return this._def.innerType._parse(q)}unwrap(){return this._def.innerType}}b.create=(q,Q)=>{return new b({innerType:q,typeName:E.ZodOptional,...O(Q)})};class h extends V{_parse(q){if(this._getType(q)===M.null)return D(null);return this._def.innerType._parse(q)}unwrap(){return this._def.innerType}}h.create=(q,Q)=>{return new h({innerType:q,typeName:E.ZodNullable,...O(Q)})};class Hq extends V{_parse(q){let{ctx:Q}=this._processInputParams(q),W=Q.data;if(Q.parsedType===M.undefined)W=this._def.defaultValue();return this._def.innerType._parse({data:W,path:Q.path,parent:Q})}removeDefault(){return this._def.innerType}}Hq.create=(q,Q)=>{return new Hq({innerType:q,typeName:E.ZodDefault,defaultValue:typeof Q.default==="function"?Q.default:()=>Q.default,...O(Q)})};class Bq extends V{_parse(q){let{ctx:Q}=this._processInputParams(q),W={...Q,common:{...Q.common,issues:[]}},J=this._def.innerType._parse({data:W.data,path:W.path,parent:{...W}});if(jq(J))return J.then((X)=>{return{status:"valid",value:X.status==="valid"?X.value:this._def.catchValue({get error(){return new F(W.common.issues)},input:W.data})}});else return{status:"valid",value:J.status==="valid"?J.value:this._def.catchValue({get error(){return new F(W.common.issues)},input:W.data})}}removeCatch(){return this._def.innerType}}Bq.create=(q,Q)=>{return new Bq({innerType:q,typeName:E.ZodCatch,catchValue:typeof Q.catch==="function"?Q.catch:()=>Q.catch,...O(Q)})};class Sq extends V{_parse(q){if(this._getType(q)!==M.nan){let W=this._getOrReturnCtx(q);return z(W,{code:H.invalid_type,expected:M.nan,received:W.parsedType}),j}return{status:"valid",value:q.data}}}Sq.create=(q)=>{return new Sq({typeName:E.ZodNaN,...O(q)})};var I1=Symbol("zod_brand");class fq extends V{_parse(q){let{ctx:Q}=this._processInputParams(q),W=Q.data;return this._def.type._parse({data:W,path:Q.path,parent:Q})}unwrap(){return this._def.type}}class Aq extends V{_parse(q){let{status:Q,ctx:W}=this._processInputParams(q);if(W.common.async)return(async()=>{let X=await this._def.in._parseAsync({data:W.data,path:W.path,parent:W});if(X.status==="aborted")return j;if(X.status==="dirty")return Q.dirty(),t(X.value);else return this._def.out._parseAsync({data:X.value,path:W.path,parent:W})})();else{let J=this._def.in._parseSync({data:W.data,path:W.path,parent:W});if(J.status==="aborted")return j;if(J.status==="dirty")return Q.dirty(),{status:"dirty",value:J.value};else return this._def.out._parseSync({data:J.value,path:W.path,parent:W})}}static create(q,Q){return new Aq({in:q,out:Q,typeName:E.ZodPipeline})}}class wq extends V{_parse(q){let Q=this._def.innerType._parse(q),W=(J)=>{if(Rq(J))J.value=Object.freeze(J.value);return J};return jq(Q)?Q.then((J)=>W(J)):W(Q)}unwrap(){return this._def.innerType}}wq.create=(q,Q)=>{return new wq({innerType:q,typeName:E.ZodReadonly,...O(Q)})};function W1(q,Q={},W){if(q)return n.create().superRefine((J,X)=>{var G,Y;if(!q(J)){let B=typeof Q==="function"?Q(J):typeof Q==="string"?{message:Q}:Q,w=(Y=(G=B.fatal)!==null&&G!==void 0?G:W)!==null&&Y!==void 0?Y:!0,R=typeof B==="string"?{message:B}:B;X.addIssue({code:"custom",...R,fatal:w})}});return n.create()}var P1={object:S.lazycreate},E;(function(q){q.ZodString="ZodString",q.ZodNumber="ZodNumber",q.ZodNaN="ZodNaN",q.ZodBigInt="ZodBigInt",q.ZodBoolean="ZodBoolean",q.ZodDate="ZodDate",q.ZodSymbol="ZodSymbol",q.ZodUndefined="ZodUndefined",q.ZodNull="ZodNull",q.ZodAny="ZodAny",q.ZodUnknown="ZodUnknown",q.ZodNever="ZodNever",q.ZodVoid="ZodVoid",q.ZodArray="ZodArray",q.ZodObject="ZodObject",q.ZodUnion="ZodUnion",q.ZodDiscriminatedUnion="ZodDiscriminatedUnion",q.ZodIntersection="ZodIntersection",q.ZodTuple="ZodTuple",q.ZodRecord="ZodRecord",q.ZodMap="ZodMap",q.ZodSet="ZodSet",q.ZodFunction="ZodFunction",q.ZodLazy="ZodLazy",q.ZodLiteral="ZodLiteral",q.ZodEnum="ZodEnum",q.ZodEffects="ZodEffects",q.ZodNativeEnum="ZodNativeEnum",q.ZodOptional="ZodOptional",q.ZodNullable="ZodNullable",q.ZodDefault="ZodDefault",q.ZodCatch="ZodCatch",q.ZodPromise="ZodPromise",q.ZodBranded="ZodBranded",q.ZodPipeline="ZodPipeline",q.ZodReadonly="ZodReadonly"})(E||(E={}));var h1=(q,Q={message:`Input not instance of ${q.name}`})=>W1((W)=>W instanceof q,Q),X1=N.create,$1=l.create,g1=Sq.create,T1=y.create,J1=qq.create,x1=Z.create,l1=Oq.create,y1=Qq.create,m1=Wq.create,Z1=n.create,n1=x.create,c1=k.create,u1=Vq.create,p1=v.create,i1=S.create,r1=S.strictCreate,d1=Xq.create,o1=bq.create,a1=$q.create,t1=I.create,s1=Lq.create,e1=Uq.create,qQ=c.create,QQ=s.create,WQ=Jq.create,XQ=Gq.create,$Q=m.create,JQ=Yq.create,GQ=u.create,oq=K.create,YQ=b.create,HQ=h.create,BQ=K.createWithPreprocess,wQ=Aq.create,zQ=()=>X1().optional(),MQ=()=>$1().optional(),_Q=()=>J1().optional(),EQ={string:(q)=>N.create({...q,coerce:!0}),number:(q)=>l.create({...q,coerce:!0}),boolean:(q)=>qq.create({...q,coerce:!0}),bigint:(q)=>y.create({...q,coerce:!0}),date:(q)=>Z.create({...q,coerce:!0})},RQ=j,g=Object.freeze({__proto__:null,defaultErrorMap:e,setErrorMap:R1,getErrorMap:Kq,makeIssue:Nq,EMPTY_PATH:j1,addIssueToContext:z,ParseStatus:A,INVALID:j,DIRTY:t,OK:D,isAborted:Zq,isDirty:nq,isValid:Rq,isAsync:jq,get util(){return L},get objectUtil(){return mq},ZodParsedType:M,getParsedType:T,ZodType:V,datetimeRegex:q1,ZodString:N,ZodNumber:l,ZodBigInt:y,ZodBoolean:qq,ZodDate:Z,ZodSymbol:Oq,ZodUndefined:Qq,ZodNull:Wq,ZodAny:n,ZodUnknown:x,ZodNever:k,ZodVoid:Vq,ZodArray:v,ZodObject:S,ZodUnion:Xq,ZodDiscriminatedUnion:bq,ZodIntersection:$q,ZodTuple:I,ZodRecord:Lq,ZodMap:Uq,ZodSet:c,ZodFunction:s,ZodLazy:Jq,ZodLiteral:Gq,ZodEnum:m,ZodNativeEnum:Yq,ZodPromise:u,ZodEffects:K,ZodTransformer:K,ZodOptional:b,ZodNullable:h,ZodDefault:Hq,ZodCatch:Bq,ZodNaN:Sq,BRAND:I1,ZodBranded:fq,ZodPipeline:Aq,ZodReadonly:wq,custom:W1,Schema:V,ZodSchema:V,late:P1,get ZodFirstPartyTypeKind(){return E},coerce:EQ,any:Z1,array:p1,bigint:T1,boolean:J1,date:x1,discriminatedUnion:o1,effect:oq,enum:$Q,function:QQ,instanceof:h1,intersection:a1,lazy:WQ,literal:XQ,map:e1,nan:g1,nativeEnum:JQ,never:c1,null:m1,nullable:HQ,number:$1,object:i1,oboolean:_Q,onumber:MQ,optional:YQ,ostring:zQ,pipeline:wQ,preprocess:BQ,promise:GQ,record:s1,set:qQ,strictObject:r1,string:X1,symbol:l1,transformer:oq,tuple:t1,undefined:y1,union:d1,unknown:n1,void:u1,NEVER:RQ,ZodIssueCode:H,quotelessJson:E1,ZodError:F});var Cq=new Map;function G1(q){let Q=q.evtn;if(typeof Q=="undefined")return!1;let W=Cq.get(Q);if(typeof W=="undefined")return!1;try{return W.parse(q),!0}catch(J){return!1}}Cq.set("query",g.object({evtn:g.string()}));Cq.set("query_reply",g.object({evtn:g.string(),hat:g.string()}));Cq.set("change",g.object({evtn:g.string(),hat:g.string()}));var Y1;function H1(q){if(q.key=="Escape"){if(uq(),MPP.chat)MPP.chat.blur()}}function B1(q,Q){if(MPP.chat)MPP.chat.blur();$(document).on("keydown",H1),$("#modal #modals > *").hide(),$("#modal").fadeIn(250),$(q).show(),setTimeout(()=>{$(q).find(Q).focus()},100),Y1=q}function uq(){$(document).off("keydown",H1),$("#modal").fadeOut(100),$("#modal #modals > *").hide(),Y1=null}function pq(){MPP.client.sendArray([{m:"+custom"}]),console.log("%cMPP hats loaded","color: #8d3f50; font-size: 14pt;"),MPP.client.off("hi",pq)}if(!MPP.client.isConnected())MPP.client.on("hi",pq);else pq();$("body").append(`<button class="mpp-hats-button top-button" aria-hidden="true">
        <img id="mpp-hats-button-icon" src="https://hats.hri7566.info/api/hat?id=tophat" style="vertical-align: middle;">
        Hats
    </button>`);$(".mpp-hats-button").css({position:"fixed",right:"6px",top:"58px","z-index":"100"});$(".mpp-hats-button").on("click",async()=>{$("#modal #modals #hats #hat-selector").empty(),B1("#modal #modals #hats");let q=await Tq();for(let Q of Object.keys(q)){let W=q[Q];$("#modal #modals #hats #hat-selector").append(`<option value="${Q}">${W}</option>`)}$(`#modal #modals #hats #hat-selector option[value=${C()}]`).attr("selected","true"),w1(C())});$("#modals").append(`
<div id="hats" class="dialog" style="height: 175px; margin-top: -90px; display: none;">
    <h3>MPP Hats</h3>
    <hr />
    <p>
        <label>Select hat: &nbsp;
            <select id="hat-selector">
                <option value="">None</option>
            </select>
        </label>
        <label>
            <p>Preview: &nbsp;</p>
            <img style="padding-left: 32px;" id="hat-selector-preview" src="" width=32>
        </label>
    </p>
    <button class="submit">SUBMIT</button>
</div>`);$("#modal #modals #hats button.submit").on("click",()=>{let q=$("#modal #modals #hats #hat-selector").val();Fq(q),uq()});$("#modal #modals #hats select#hat-selector").on("change",function(q){let Q=$("option:selected",this),W=this.value;w1(W)});function w1(q){let Q=d(q);$("#hat-selector-preview").attr("src",Q.toString())}var jQ="hat_";MPP.client.on("custom",(q)=>{if(typeof q.data.m=="undefined")return;if(q.data.evtn=q.data.m.substring(jQ.length).trim(),delete q.data.m,!G1(q.data))return;o.emit(q.data,q)});MPP.client.on("participant added",(q)=>{p(q._id,{m:"hat_query"})});MPP.client.on("participant removed",(q)=>{gq(q._id)});MPP.client.on("participant update",(q)=>{let Q=Mq(q._id);if(!Q)return;Dq(q._id,Q)});MPP.client.on("ch",(q)=>{Fq(C())});MPP.client.on("c",async(q)=>{if(typeof q.c!=="object")return;if(!Array.isArray)return;for(let Q=0;Q<q.c.length;Q++)try{let W=q.c[Q];if(W.m=="dm")continue;let J=MPP.client.findParticipantById(W.p.id);if(!J)continue;let X=Mq(J._id);if(!X)continue;let G=`<span class="chat-hat" style="content: url(${d(X)});"></span>`,Y=$(`#chat ul li#msg-${W.id}`);$(Y).children(".name").before(G)}catch(W){console.error(W);continue}});MPP.client.on("a",(q)=>{try{let Q=MPP.client.findParticipantById(q.p.id);if(!Q)return;let W=Mq(Q._id);if(!W)return;let J=`<span class="chat-hat" style="content: url(${d(W)});"></span>`,X=$(`#chat ul li#msg-${q.id}`);$(X).children(".name").before(J)}catch(Q){console.error(Q)}});MPP.hats=xq;
